{"ast":null,"code":"var _jsxFileName = \"/home/mono/reactNative/restaurantcompleto/restaurantcliente/src/components/paginas/NuevoPlatillo.js\";\nimport React, { useContext, useState } from 'react';\nimport { useFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport { FirebaseContext } from \"../../firebase\";\nimport { useNavigate } from \"react-router-dom\";\nimport FileUploader from \"react-firebase-file-uploader\";\n\nconst NuevoPlatillo = props => {\n  // state para las imagenes\n  const [subiendo, guardarSubiendo] = useState(false);\n  const [progreso, guardarProgreso] = useState(0);\n  const [urliamgen, guardarUrlimagen] = useState(\"\"); //context con las operaciones de firebase\n\n  const {\n    firebase\n  } = useContext(FirebaseContext); // hook  para redireccionar \n\n  const navigate = useNavigate(); // validacion y leer los datos del formulario\n\n  const formik = useFormik({\n    initialValues: {\n      nombre: \"\",\n      precio: \"\",\n      categoria: \"\",\n      imagen: \"\",\n      descripcion: \"\"\n    },\n    validationSchema: Yup.object({\n      nombre: Yup.string().min(3, \"Los Platillos deben tener al menos 3 caracteres\").required(\"El Nombre del platillo es obligarorio\"),\n      precio: Yup.number().min(1, \"Debes agregar un numero \").required(\"El precio es obligarorio\"),\n      categoria: Yup.string().required(\"La categoria es obligatoria\"),\n      descripcion: Yup.string().min(10, \"La descripcion debe tener al menos 10 caracteres\").required(\"La descripcion es obligatoria\")\n    }),\n    onSubmit: platillo => {\n      try {\n        platillo.existencia = true;\n        platillo.imagen = urliamgen;\n        firebase.db.collection(\"productos\").add(platillo); // redireccionar \n\n        navigate(\"/menu\");\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }); // todo sobre las imagenes\n\n  const handleUploadStart = () => {\n    guardarProgreso(0);\n    guardarSubiendo(true);\n  };\n\n  const handleUploadError = error => {\n    guardarSubiendo(false);\n    console.log(error);\n  };\n\n  const handleUploadSucess = async nombre => {\n    guardarProgreso(100);\n    guardarSubiendo(false); // almacenar la URL de destino\n\n    const url = await firebase.storage.ref(\"productos\").child(nombre).getDownloadURL();\n    console.log(url);\n    guardarUrlimagen(url);\n  };\n\n  const handleProgress = progreso => {\n    guardarProgreso(progreso);\n    console.log(progreso);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-3xl font-light mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, \"Agregar Platillo\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-center mt-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-full max-w-3xl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: formik.handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"block text-gray-700 text-sm font-bold mb-2\",\n    htmlFor: \"nombre\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 33\n    }\n  }, \"Nombre\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n    id: \"nombre\",\n    type: \"text\",\n    placeholder: \"Nombre Platillo\",\n    value: formik.values.nombre,\n    onChange: formik.handleChange,\n    onBlur: formik.handleBlur,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 33\n    }\n  })), formik.touched.nombre && formik.errors.nombre ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-5\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 37\n    }\n  }, \" Hubo un error\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 37\n    }\n  }, formik.errors.nombre)) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"block text-gray-700 text-sm font-bold mb-2\",\n    htmlFor: \"precio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 33\n    }\n  }, \"Precio\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n    id: \"precio\",\n    type: \"number\",\n    placeholder: \"$\",\n    min: \"0\",\n    value: formik.values.precio,\n    onChange: formik.handleChange,\n    onBlur: formik.handleBlur,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 33\n    }\n  })), formik.touched.precio && formik.errors.precio ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-5\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 37\n    }\n  }, \" Hubo un error\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 37\n    }\n  }, formik.errors.precio)) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"block text-gray-700 text-sm font-bold mb-2\",\n    htmlFor: \"categoria\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 33\n    }\n  }, \"Categoria\"), /*#__PURE__*/React.createElement(\"select\", {\n    className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",\n    id: \"precio\",\n    name: \"categoria\",\n    value: formik.values.categoria,\n    onChange: formik.handleChange,\n    onBlur: formik.handleBlur,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 37\n    }\n  }, \"-- Seleccione --\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"desayuno\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 37\n    }\n  }, \"Desayuno\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"comida\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 37\n    }\n  }, \"Comida\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"cena\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 37\n    }\n  }, \"Cena\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"bebidas\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 37\n    }\n  }, \"Bebidas\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"postre\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 37\n    }\n  }, \"Postre\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"ensalada\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 37\n    }\n  }, \"Ensalada\"))), formik.touched.categoria && formik.errors.categoria ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-5\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 37\n    }\n  }, \" Hubo un error\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 37\n    }\n  }, formik.errors.categoria)) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"block text-gray-700 text-sm font-bold mb-2\",\n    htmlFor: \"imagen\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 33\n    }\n  }, \"Imagen\"), /*#__PURE__*/React.createElement(FileUploader, {\n    accept: \"image/*\",\n    id: \"imagen\",\n    name: \"imagen\",\n    randomizeFilename: true,\n    storageRef: firebase.storage.ref(\"productos\"),\n    onUploadStart: handleUploadStart,\n    onUploadError: handleUploadError,\n    onUploadSuccess: handleUploadSucess,\n    onProgress: handleProgress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 33\n    }\n  })), subiendo && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"h-12 relative w-full border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-green-500 absolute left-0 top-0 text-white px-2 text-sm h-12 flex items-center\",\n    style: {\n      width: `${progreso}%`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 37\n    }\n  }, progreso, \"  %\")), urliamgen && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"bg-green-500 text-white p-3 text-center my-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 33\n    }\n  }, \"La imagen se subio correctamente\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"block text-gray-700 text-sm font-bold mb-2\",\n    htmlFor: \"descripcion\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 33\n    }\n  }, \"Descripcion\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-40\",\n    id: \"descripcion\",\n    placeholder: \"Descripcion del platillo\",\n    value: formik.values.descripcion,\n    onChange: formik.handleChange,\n    onBlur: formik.handleBlur,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 33\n    }\n  })), formik.touched.descripcion && formik.errors.descripcion ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-5\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 37\n    }\n  }, \" Hubo un error\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 37\n    }\n  }, formik.errors.descripcion)) : null, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    className: \"bg-gray-800 hover:bg-gray-900 w-full mt-5 p-2 text-white uppercase font-bold\",\n    value: \"agregar platillo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 29\n    }\n  })))));\n};\n\nexport default NuevoPlatillo;","map":{"version":3,"sources":["/home/mono/reactNative/restaurantcompleto/restaurantcliente/src/components/paginas/NuevoPlatillo.js"],"names":["React","useContext","useState","useFormik","Yup","FirebaseContext","useNavigate","FileUploader","NuevoPlatillo","props","subiendo","guardarSubiendo","progreso","guardarProgreso","urliamgen","guardarUrlimagen","firebase","navigate","formik","initialValues","nombre","precio","categoria","imagen","descripcion","validationSchema","object","string","min","required","number","onSubmit","platillo","existencia","db","collection","add","error","console","log","handleUploadStart","handleUploadError","handleUploadSucess","url","storage","ref","child","getDownloadURL","handleProgress","handleSubmit","values","handleChange","handleBlur","touched","errors","width"],"mappings":"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","sourcesContent":["import React,{useContext,useState} from 'react';\nimport {useFormik} from \"formik\"\nimport * as Yup from \"yup\"\nimport {FirebaseContext} from \"../../firebase\"\nimport {useNavigate} from \"react-router-dom\"\nimport FileUploader from \"react-firebase-file-uploader\"\n\nconst NuevoPlatillo = props => {\n\n    // state para las imagenes\n\n    const [subiendo,guardarSubiendo]= useState(false)\n    const [progreso,guardarProgreso] = useState(0)\n    const [urliamgen, guardarUrlimagen] = useState(\"\")\n\n    //context con las operaciones de firebase\n\n    const {firebase} = useContext(FirebaseContext)\n\n    // hook  para redireccionar \n\n    const navigate = useNavigate()\n\n    \n    // validacion y leer los datos del formulario\n\n    const formik = useFormik({\n        initialValues:{\n            nombre:\"\",\n            precio:\"\",\n            categoria:\"\",\n            imagen:\"\",\n            descripcion:\"\"\n\n        },\n        validationSchema:Yup.object({\n            nombre : Yup.string()\n                        .min(3, \"Los Platillos deben tener al menos 3 caracteres\")\n                        .required(\"El Nombre del platillo es obligarorio\"),\n            precio : Yup.number()\n                        .min(1, \"Debes agregar un numero \")\n                        .required(\"El precio es obligarorio\"),\n            categoria : Yup.string()\n                        .required(\"La categoria es obligatoria\"),\n            descripcion : Yup.string()\n                        .min(10, \"La descripcion debe tener al menos 10 caracteres\")\n                        .required(\"La descripcion es obligatoria\"),\n\n\n                    \n        }),\n        onSubmit: platillo =>{\n            try{\n                platillo.existencia = true;\n                platillo.imagen = urliamgen\n                firebase.db.collection(\"productos\").add(platillo)\n\n                // redireccionar \n                navigate(\"/menu\")\n            }catch(error){\n                console.log(error)\n            }\n        }\n    })\n\n        // todo sobre las imagenes\n\n        const handleUploadStart =()=>{\n\n            guardarProgreso(0)\n            guardarSubiendo(true)\n\n        }\n        const handleUploadError =(error)=>{\n            guardarSubiendo(false)\n            console.log(error)\n        }\n        const handleUploadSucess = async (nombre)=>{\n            guardarProgreso(100)\n            guardarSubiendo(false)\n\n            // almacenar la URL de destino\n\n            const url = await firebase\n                        .storage\n                        .ref(\"productos\")\n                        .child(nombre)\n                        .getDownloadURL()\n            console.log(url)\n            guardarUrlimagen(url)\n        }\n        const handleProgress =(progreso)=>{\n            guardarProgreso(progreso)\n\n            console.log(progreso)\n        }\n       \n\n    return (\n        <>\n            <h1 className=\"text-3xl font-light mb-4\">Agregar Platillo</h1>\n\n            <div className=\"flex justify-center mt-10\">\n                <div className=\"w-full max-w-3xl\">\n                    <form onSubmit={formik.handleSubmit}>\n                            <div className=\"mb-4\">\n                                <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"nombre\">Nombre</label>\n                                <input\n                                    className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                                    id=\"nombre\"\n                                    type=\"text\"\n                                    placeholder=\"Nombre Platillo\"\n                                    value={formik.values.nombre}\n                                    onChange={formik.handleChange}\n                                    onBlur={formik.handleBlur}\n\n                                />\n\n                            </div>\n\n                            {formik.touched.nombre && formik.errors.nombre ?(\n                                <div className=\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-5\" role=\"alert\">\n                                    <p className=\"font-bold\"> Hubo un error</p>\n                                    <p>{formik.errors.nombre}</p>\n                                </div>\n                            ): null}\n\n                            <div className=\"mb-4\">\n                                <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"precio\">Precio</label>\n                                <input\n                                    className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                                    id=\"precio\"\n                                    type=\"number\"\n                                    placeholder=\"$\"\n                                    min=\"0\"\n                                    value={formik.values.precio}\n                                    onChange={formik.handleChange}\n                                    onBlur={formik.handleBlur}\n\n\n                                />\n\n                            </div>\n                            {formik.touched.precio && formik.errors.precio ?(\n                                <div className=\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-5\" role=\"alert\">\n                                    <p className=\"font-bold\"> Hubo un error</p>\n                                    <p>{formik.errors.precio}</p>\n                                </div>\n                            ): null}\n\n                            <div className=\"mb-4\">\n                                <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"categoria\">Categoria</label>\n                                <select\n                                     className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                                     id=\"precio\"\n                                     name=\"categoria\"\n                                     value={formik.values.categoria}\n                                     onChange={formik.handleChange}\n                                     onBlur={formik.handleBlur}\n\n                                >\n                                    <option value=\"\">-- Seleccione --</option>\n                                    <option value=\"desayuno\">Desayuno</option>\n                                    <option value=\"comida\">Comida</option>\n                                    <option value=\"cena\">Cena</option>\n                                    <option value=\"bebidas\">Bebidas</option>\n                                    <option value=\"postre\">Postre</option>\n                                    <option value=\"ensalada\">Ensalada</option>\n\n                                </select>\n                               \n                            </div>\n\n                            {formik.touched.categoria && formik.errors.categoria ?(\n                                <div className=\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-5\" role=\"alert\">\n                                    <p className=\"font-bold\"> Hubo un error</p>\n                                    <p>{formik.errors.categoria}</p>\n                                </div>\n                            ): null}\n\n                            <div className=\"mb-4\">\n                                <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"imagen\">Imagen</label>\n                                <FileUploader\n                                    accept=\"image/*\"\n                                    id=\"imagen\"\n                                    name=\"imagen\"\n                                    randomizeFilename\n                                    storageRef={firebase.storage.ref(\"productos\")}\n                                    onUploadStart={handleUploadStart}\n                                    onUploadError={handleUploadError}\n                                    onUploadSuccess={handleUploadSucess}\n                                    onProgress={handleProgress}\n\n                                />\n\n                            </div>\n                            {subiendo && (\n                                <div className=\"h-12 relative w-full border\">\n                                    <div className=\"bg-green-500 absolute left-0 top-0 text-white px-2 text-sm h-12 flex items-center\" style={{width:`${progreso}%`}}>\n                                        {progreso}  % \n\n                                    </div>\n                                </div>\n                            )}\n                            {urliamgen && (\n                                <p className=\"bg-green-500 text-white p-3 text-center my-5\">\n                                    La imagen se subio correctamente\n                                </p>\n                            )}\n\n                            <div className=\"mb-4\">\n                                <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"descripcion\">Descripcion</label>\n                                <textarea\n                                    className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-40\"\n                                    id=\"descripcion\"\n                                    placeholder=\"Descripcion del platillo\"\n                                    value={formik.values.descripcion}\n                                    onChange={formik.handleChange}\n                                    onBlur={formik.handleBlur}\n\n\n                                ></textarea>\n\n                            </div>\n\n                            {formik.touched.descripcion && formik.errors.descripcion ?(\n                                <div className=\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-5\" role=\"alert\">\n                                    <p className=\"font-bold\"> Hubo un error</p>\n                                    <p>{formik.errors.descripcion}</p>\n                                </div>\n                            ): null}\n\n                            <input\n                                type=\"submit\"\n                                className=\"bg-gray-800 hover:bg-gray-900 w-full mt-5 p-2 text-white uppercase font-bold\"\n                                value=\"agregar platillo\"\n                            />\n                            \n\n                    </form>\n                </div>\n            </div>\n        </>\n    );\n};\n\n\n\nexport default NuevoPlatillo;"]},"metadata":{},"sourceType":"module"}